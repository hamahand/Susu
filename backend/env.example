# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://sususer:suspass@localhost:5432/sususave

# ============================================
# SECURITY (REQUIRED - CHANGE THESE!)
# ============================================
# SECRET_KEY: Used for JWT token signing
# Generate with: openssl rand -hex 32
SECRET_KEY=your-secret-key-change-in-production-use-openssl-rand-hex-32

# ENCRYPTION_KEY: Used for encrypting sensitive data (phone numbers, etc.)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=generate-using-python-cryptography-fernet-generate-key

ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080

# ============================================
# USSD CONFIGURATION
# ============================================
USSD_CODE=*920*55#

# ============================================
# SMS & MOBILE MONEY (Development Settings)
# ============================================
# Set to True to enable real SMS/MoMo services
# Set to False to use mock services (logs to file)
ENABLE_REAL_SMS=False
ENABLE_REAL_MOMO=False
SMS_LOGS_PATH=sms_logs.txt
MOMO_TRANSACTIONS_PATH=momo_transactions.json

# ============================================
# AFRICASTALKING CONFIGURATION
# ============================================
# Get credentials from: https://account.africastalking.com/
# Free sandbox available for testing

# Username: Use "sandbox" for testing, your actual username for production
AT_USERNAME=sandbox

# API Key: Get from Settings â†’ API Key in AT Dashboard
# Example: atsk_1234567890abcdef1234567890abcdef
AT_API_KEY=your-at-api-key-from-dashboard

# Environment: "sandbox" for testing, "production" for live
AT_ENVIRONMENT=sandbox

# USSD Service Code: Your assigned code from AfricasTalking
# Your registered code: *384*15262#
AT_USSD_SERVICE_CODE=*384*15262#

# ============================================
# MTN API CONFIGURATION
# ============================================
# Get credentials from: https://developers.mtn.com/
# Note: Current values are sandbox credentials

# Consumer Key: Your MTN API consumer key
MTN_CONSUMER_KEY=J7SH4tF6QqAsa6VYFhtGRwgpvPjYnF9y

# Consumer Secret: Your MTN API consumer secret
MTN_CONSUMER_SECRET=1gBhKETCBKLMyILR

# Environment: "sandbox" for testing, "production" for live
MTN_ENVIRONMENT=sandbox

# Base URL for MTN API (usually doesn't change)
MTN_BASE_URL=https://api.mtn.com/v1

# USSD Service Code: Your assigned MTN USSD code
# Must be registered in MTN Developer Portal
MTN_USSD_SERVICE_CODE=*920*55#

# Callback URL: Where MTN sends USSD requests
# For local dev: Use ngrok (https://your-id.ngrok-free.app/ussd/callback)
# For production: Use your domain (https://api.yourdomain.com/ussd/callback)
# IMPORTANT: Must be HTTPS!
MTN_CALLBACK_URL=https://76280680be24.ngrok-free.app/ussd/callback

# ============================================
# MTN MOBILE MONEY CONFIGURATION
# ============================================
# Get credentials from: https://momodeveloper.mtn.com/
# Note: Separate from MTN API credentials

# MoMo Subscription Key: From MoMo Developer Portal
# Get by subscribing to Collections and Disbursements APIs
MTN_MOMO_SUBSCRIPTION_KEY=your-momo-subscription-key

# API User: Generated via MoMo API or setup script
# Run: python setup_mtn_momo.py to generate
MTN_MOMO_API_USER=your-api-user-id

# API Key: Generated via MoMo API or setup script
# Run: python setup_mtn_momo.py to generate
MTN_MOMO_API_KEY=your-api-key

# Target Environment: "sandbox" or "production"
MTN_MOMO_TARGET_ENVIRONMENT=sandbox

# Base URL: Changes based on environment
# Sandbox: https://sandbox.momodeveloper.mtn.com
# Production: https://momodeveloper.mtn.com
MTN_MOMO_BASE_URL=https://sandbox.momodeveloper.mtn.com

# Currency: GHS for Ghana, EUR for other regions
MTN_MOMO_CURRENCY=GHS

# ============================================
# PROVIDER SELECTION
# ============================================
# USE_MTN_SERVICES: Main toggle for provider selection
#   True  = Use MTN for USSD, SMS, and MoMo
#   False = Use AfricasTalking for USSD and SMS
USE_MTN_SERVICES=True

# Fine-grained control (if you want to mix providers)
ENABLE_MTN_USSD=True
ENABLE_MTN_SMS=True
ENABLE_MTN_MOMO=True

# ============================================
# MTN KYC CONFIGURATION (Ghana Compliance)
# ============================================
# Ghana requires KYC for financial transactions
ENABLE_MTN_KYC=True
MTN_KYC_BASE_URL=https://api.mtn.com/v1

# Set to False during development/testing if KYC is not set up
REQUIRE_KYC_FOR_PAYMENTS=True

# ============================================
# SCHEDULER CONFIGURATION
# ============================================
# Background tasks for payment reminders, etc.
ENABLE_SCHEDULER=True
PAYMENT_CHECK_HOUR=6  # Check payments at 6:00 AM
RETRY_INTERVAL_HOURS=6  # Retry failed operations every 6 hours
PAYOUT_CHECK_INTERVAL_HOURS=2  # Check for payouts every 2 hours

# ============================================
# REDIS CONFIGURATION (Optional)
# ============================================
# Redis is recommended for production to store USSD sessions
# For development, in-memory storage is used by default
REDIS_URL=redis://localhost:6379/0
USE_REDIS=False  # Set to True to use Redis

# ============================================
# CORS ORIGINS
# ============================================
# List of allowed origins for CORS
# Add your frontend URLs here
CORS_ORIGINS=["http://localhost:3000","http://localhost:5173","http://localhost:8081"]

# ============================================
# SETUP INSTRUCTIONS
# ============================================
# 1. Copy this file: cp env.example .env
# 2. Generate SECRET_KEY: openssl rand -hex 32
# 3. Generate ENCRYPTION_KEY: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# 4. Choose provider: Set USE_MTN_SERVICES to True or False
# 5. Add provider credentials (MTN or AfricasTalking)
# 6. For local dev with callback: Start ngrok and update MTN_CALLBACK_URL
# 7. Run verification: python verify_ussd_setup.py
# 8. Start backend: python -m uvicorn app.main:app --reload
#
# For detailed setup instructions, see: USSD_SETUP_INSTRUCTIONS.md

